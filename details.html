<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails de l'hôtel - HotelReserve</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Spécifique pour la page détails */
        .details-header {
            height: 60vh;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        .details-container {
            max-width: 1000px;
            margin: -80px auto 50px;
            background: var(--white);
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
        }
        .hotel-meta {
            display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 20px;
        }
        .hotel-title h1 { font-size: 2.5rem; color: var(--primary); margin-bottom: 5px; }
        .hotel-title .location { font-size: 1.1rem; }
        
        .hotel-price { text-align: right; }
        .hotel-price .price { font-size: 2rem; font-weight: 700; color: var(--accent); }
        .hotel-price span { font-size: 1rem; color: var(--text-light); font-weight: 400; }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        .feature-item {
            background: var(--bg-light); padding: 12px 15px; border-radius: 12px;
            font-size: 0.95rem; color: var(--text-main); display: flex; align-items: center; gap: 10px;
            border: 1px solid transparent; transition: all 0.3s;
        }
        .feature-item:hover { border-color: var(--accent); background: white; }
        .feature-item i { color: var(--accent); }

        .description { line-height: 1.8; color: #4b5563; font-size: 1.05rem; margin-bottom: 30px; }
        
        .action-area {
            border-top: 1px solid #eee; margin-top: 30px; padding-top: 30px;
            display: flex; justify-content: flex-end; align-items: center; gap: 20px;
        }

        .btn-reserve-big {
            background: var(--primary); color: white; padding: 18px 40px; border-radius: 50px;
            font-size: 1.1rem; font-weight: 600; border: none; cursor: pointer; transition: all 0.3s;
            box-shadow: 0 10px 20px rgba(15, 23, 42, 0.2);
        }
        .btn-reserve-big:hover { transform: translateY(-3px); background: var(--accent); }

        @media (max-width: 768px) {
            .details-container { margin-top: -40px; border-radius: 24px 24px 0 0; padding: 30px 20px; }
            .hotel-meta { flex-direction: column; }
            .hotel-price { text-align: left; }
            .action-area { flex-direction: column; }
            .btn-reserve-big { width: 100%; }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="logo"><a href="index.html"><i class="fa-solid fa-hotel"></i> HotelReserve</a></div>
        <ul class="nav-links">
            <li><a href="index.html"><i class="fa-solid fa-arrow-left"></i> Retour aux offres</a></li>
        </ul>
    </nav>

    <div id="hotel-details-view"></div>

    <footer>
        <div class="footer-bottom" style="margin-top: 0;">&copy; 2026 HotelReserve.</div>
    </footer>

    <script>
        // DONNÉES COMPLÈTES (12 Hôtels avec descriptions détaillées)
        const hotelsData = [
            { 
                id: 1, 
                name: "Hôtel Royal Atlas", 
                location: "Agadir", 
                price: 1200, 
                image: "https://images.unsplash.com/photo-1571003123894-1f0594d2b5d9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Situé en front de mer, le Royal Atlas Agadir vous offre une expérience 5 étoiles inoubliable. Profitez de ses 3 piscines, de son spa luxueux et d'un accès direct à la plage privée. Idéal pour les familles et les couples en quête de détente.",
                features: ["Wifi Haut Débit", "3 Piscines", "Spa & Hamman", "Front de mer", "Club Enfants", "All-inclusive"]
            },
            { 
                id: 2, 
                name: "Riad Fès Maya", 
                location: "Fès", 
                price: 850, 
                image: "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Plongez dans l'histoire au cœur de la médina de Fès. Ce Riad restauré avec passion offre des zelliges authentiques, un patio andalou et une terrasse panoramique sur la vieille ville. Une immersion culturelle garantie.",
                features: ["Petit-déjeuner Marocain", "Patio Andalou", "Terrasse Panoramique", "Climatisation", "Thé à volonté"]
            },
            { 
                id: 3, 
                name: "Mamounia Palace", 
                location: "Marrakech", 
                price: 3500, 
                image: "https://images.unsplash.com/photo-1580835845971-a393b73bf378?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "L'adresse mythique de Marrakech. La Mamounia incarne le raffinement marocain avec ses jardins séculaires, son service d'excellence et ses suites somptueuses. Une expérience de luxe ultime.",
                features: ["Jardins Royaux", "Service Majordome", "4 Restaurants", "Spa Dior", "Piscine Chauffée"]
            },
            { 
                id: 4, 
                name: "Tanger Beach Hotel", 
                location: "Tanger", 
                price: 900, 
                image: "https://images.unsplash.com/photo-1621293954908-056b532808c1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Moderne et dynamique, cet hôtel face à la baie de Tanger est parfait pour explorer la ville blanche. Chambres spacieuses avec vue sur le détroit de Gibraltar.",
                features: ["Vue Mer", "Salle de Sport", "Parking Gratuit", "Bar Lounge", "Proche Centre"]
            },
            { 
                id: 5, 
                name: "Sahara Luxury Camp", 
                location: "Merzouga", 
                price: 600, 
                image: "https://images.unsplash.com/photo-1478131143081-80f7f84ca84d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Vivez la magie du désert sans sacrifier votre confort. Nos tentes de luxe disposent de vrais lits et de salles de bains privées. Dîner sous les étoiles et musique gnawa inclus.",
                features: ["Tente de Luxe", "Dîner Inclus", "Feu de Camp", "Douche Chaude", "Excursion Chameau"]
            },
            { 
                id: 6, 
                name: "Kasbah Tamadot", 
                location: "Atlas Mountains", 
                price: 2800, 
                image: "https://images.unsplash.com/photo-1445019980597-93fa8acb246c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Perchée dans les montagnes de l'Atlas, cette Kasbah offre des vues à couper le souffle. Calme absolu, air pur et architecture berbère traditionnelle revisitée avec luxe.",
                features: ["Piscine à débordement", "Vue Montagne", "Randonnées", "Restaurant Bio", "Calme"]
            },
            { 
                id: 7, 
                name: "Blue Pearl Riad", 
                location: "Chefchaouen", 
                price: 550, 
                image: "https://images.unsplash.com/photo-1534008753122-a83774618e05?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Un petit bijou caché dans les ruelles bleues de Chefchaouen. Ambiance intimiste, décoration bohème et accueil chaleureux pour un séjour photogénique.",
                features: ["Au cœur de la médina", "Rooftop", "Wifi", "Petit-déjeuner inclus"]
            },
            { 
                id: 8, 
                name: "Sofitel Casablanca", 
                location: "Casablanca", 
                price: 1800, 
                image: "https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "L'élégance à la française au cœur de la capitale économique. Idéal pour les voyages d'affaires ou les city-breaks, avec un bar branché et des chambres ultra-modernes.",
                features: ["Centre d'affaires", "Spa", "Salle de fitness", "Restaurant Gastronomique", "Conciergerie"]
            },
            { 
                id: 9, 
                name: "Villa d'Essaouira", 
                location: "Essaouira", 
                price: 750, 
                image: "https://images.unsplash.com/photo-1605537964076-3cb0ea2e356d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Une maison d'hôtes de charme protégée des vents alizés. Profitez de la douceur de vivre d'Essaouira, entre plage, surf et médina artistique.",
                features: ["Jardin", "Piscine", "Cours de Surf", "Proche Plage", "Ambiance Zen"]
            },
            { 
                id: 10, 
                name: "Dakhla Kite Lodge", 
                location: "Dakhla", 
                price: 1100, 
                image: "https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Le paradis des sports de glisse. Bungalows écologiques face au lagon, école de kitesurf intégrée et cuisine saine à base de produits de la mer.",
                features: ["Spot de Kitesurf", "Bungalow Lagon", "Pension Complète", "Yoga", "Transfert Aéroport"]
            },
            { 
                id: 11, 
                name: "Mazagan Resort", 
                location: "El Jadida", 
                price: 2200, 
                image: "https://images.unsplash.com/photo-1584132967334-10e028bd69f7?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Un resort grandiose pour toute la famille. Casino, terrain de golf signé Gary Player, immense plage et activités infinies pour petits et grands.",
                features: ["Golf 18 trous", "Casino", "Plage Privée", "12 Restaurants", "Kids Club Géant"]
            },
            { 
                id: 12, 
                name: "Ibis Centre", 
                location: "Rabat", 
                price: 400, 
                image: "https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Efficace, propre et idéalement situé au centre de Rabat. Le choix malin pour les voyageurs qui veulent explorer la capitale sans se ruiner.",
                features: ["Wifi Gratuit", "Petit-déjeuner buffet", "Réception 24h/24", "Proche Gare", "Bar"]
            }
        ];

        // Static fallback data for details
        const staticHotelsData = [
            {
                id: 1,
                name: "Hôtel Royal Atlas",
                location: "Agadir",
                price: 1200,
                image: "https://images.unsplash.com/photo-1571003123894-1f0594d2b5d9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Situé en front de mer, le Royal Atlas Agadir vous offre une expérience 5 étoiles inoubliable. Profitez de ses 3 piscines, de son spa luxueux et d'un accès direct à la plage privée. Idéal pour les familles et les couples en quête de détente.",
                features: ["Wifi Haut Débit", "3 Piscines", "Spa & Hamman", "Front de mer", "Club Enfants", "All-inclusive"]
            },
            {
                id: 2,
                name: "Riad Fès Maya",
                location: "Fès",
                price: 850,
                image: "https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80",
                desc: "Plongez dans l'histoire au cœur de la médina de Fès. Ce Riad restauré avec passion offre des zelliges authentiques, un patio andalou et une terrasse panoramique sur la vieille ville. Une immersion culturelle garantie.",
                features: ["Petit-déjeuner Marocain", "Patio Andalou", "Terrasse Panoramique", "Climatisation", "Thé à volonté"]
            },
            // Add more if needed
        ];

        // LOGIQUE D'AFFICHAGE
        async function loadHotelDetails() {
            const params = new URLSearchParams(window.location.search);
            const hotelId = params.get('id');

            if (!hotelId) {
                showError();
                return;
            }

            try {
                const API_URL = window.API_URL || 'http://localhost:5000/api';
                const response = await fetch(`${API_URL}/hotels/${hotelId}`);
                const data = await response.json();

                if (data.hotel) {
                    displayHotel(data.hotel);
                } else {
                    // Fallback to static data
                    const staticHotel = staticHotelsData.find(h => h.id == hotelId);
                    if (staticHotel) {
                        displayHotel(staticHotel);
                    } else {
                        showError();
                    }
                }
            } catch (error) {
                console.error('Error fetching hotel:', error);
                // Fallback to static data
                const staticHotel = staticHotelsData.find(h => h.id == hotelId);
                if (staticHotel) {
                    displayHotel(staticHotel);
                } else {
                    showError();
                }
            }
        }

        // Default images for categories
        const defaultImages = {
            'Marrakech': 'https://images.unsplash.com/photo-1548013146-72479768bada?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Agadir': 'https://images.unsplash.com/photo-1571003123894-1f0594d2b5d9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Fès': 'https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Tanger': 'https://images.unsplash.com/photo-1621293954908-056b532808c1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Rabat': 'https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Casablanca': 'https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Chefchaouen': 'https://images.unsplash.com/photo-1534008753122-a83774618e05?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Désert': 'https://images.unsplash.com/photo-1478131143081-80f7f84ca84d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60',
            'Atlas Mountains': 'https://images.unsplash.com/photo-1445019980597-93fa8acb246c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'El Jadida': 'https://images.unsplash.com/photo-1584132967334-10e028bd69f7?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Essaouira': 'https://images.unsplash.com/photo-1605537964076-3cb0ea2e356d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Dakhla': 'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Nord': 'https://images.unsplash.com/photo-1534008753122-a83774618e05?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Villes Impériales': 'https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Business': 'https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Luxe': 'https://images.unsplash.com/photo-1580835845971-a393b73bf378?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80',
            'Economique': 'https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80'
        };

        function displayHotel(hotel) {
            const view = document.getElementById('hotel-details-view');
            const imageFromHotel = hotel.images && hotel.images.length > 0 ? hotel.images[0] : (hotel.image || null);
            const defaultImage = defaultImages[hotel.category] || 'https://via.placeholder.com/1200x800?text=Image+Indisponible';
            const image = imageFromHotel || defaultImage;
            const features = hotel.features || [];

            view.innerHTML = `
                <header class="details-header" style="background-image: url('${image}');">
                    <div class="hero-overlay"></div>
                </header>

                <div class="details-container">
                    <div class="hotel-meta">
                        <div class="hotel-title">
                            <h1>${hotel.name}</h1>
                            <p class="location"><i class="fa-solid fa-location-dot"></i> ${hotel.location}</p>
                        </div>
                        <div class="hotel-price">
                            <div class="price">${hotel.price} MAD</div>
                            <span>par nuit / personne</span>
                        </div>
                    </div>

                    <hr style="margin: 30px 0; border:0; border-top:1px solid #f1f5f9;">

                    <h3>À propos de l'établissement</h3>
                    <p class="description">${hotel.description || hotel.desc || 'Description non disponible.'}</p>

                    <h3>Les équipements</h3>
                    <div class="features-grid">
                        ${features.map(f => `
                            <div class="feature-item">
                                <i class="fa-solid fa-check-circle"></i> ${f}
                            </div>
                        `).join('')}
                    </div>

                    <div class="action-area">
                        <div style="font-size:0.9rem; color:#666;">
                            <i class="fa-solid fa-shield-halved"></i> Annulation gratuite jusqu'à 24h
                        </div>
                        <button class="btn-reserve-big" onclick="startReservation('${hotel._id || hotel.id}', '${hotel.name}')">
                            Réserver ce séjour <i class="fa-solid fa-arrow-right" style="margin-left:10px;"></i>
                        </button>
                    </div>
                </div>
            `;
        }

        function showError() {
            const view = document.getElementById('hotel-details-view');
            view.innerHTML = `
                <div style="text-align:center; padding:100px;">
                    <h2><i class="fa-regular fa-face-frown"></i> Hôtel introuvable</h2>
                    <p>Désolé, nous ne trouvons pas l'hôtel que vous cherchez.</p>
                    <a href="index.html" class="btn-login" style="margin-top:20px; display:inline-block;">Retour à l'accueil</a>
                </div>`;
        }

        function startReservation(name) {
            alert("Redirection vers le paiement sécurisé pour : " + name);
        }

        // Load hotel details on page load
        document.addEventListener('DOMContentLoaded', loadHotelDetails);
    </script>
</body>
</html>